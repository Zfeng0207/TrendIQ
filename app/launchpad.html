<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Commerce CRM - Fiori Launchpad</title>

    <style>
        /* Hide the default shell header title when our dropdown is present */
        .sapUshellShellHeadTitle,
        .sapUshellShellHead h1 > span:first-child,
        [class*="shellAppTitle"] {
            visibility: hidden !important;
        }
        
        /* Navigation Dropdown Styles */
        .crm-nav-dropdown {
            position: fixed;
            top: 8px;
            left: 165px;
            z-index: 10000;
            display: inline-flex;
            align-items: center;
        }
        
        .crm-nav-trigger {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 8px;
            color: #32363a;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .crm-nav-trigger:hover {
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(0, 0, 0, 0.1);
        }
        
        .crm-nav-trigger .arrow {
            font-size: 10px;
            transition: transform 0.2s ease;
        }
        
        .crm-nav-dropdown.open .crm-nav-trigger .arrow {
            transform: rotate(180deg);
        }
        
        .crm-nav-menu {
            display: none;
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            min-width: 280px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            z-index: 10001;
        }
        
        .crm-nav-dropdown.open .crm-nav-menu {
            display: block;
            animation: slideDown 0.2s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .crm-nav-section {
            padding: 8px 0;
            border-bottom: 1px solid #e5e5e5;
        }
        
        .crm-nav-section:last-child {
            border-bottom: none;
        }
        
        .crm-nav-section-title {
            padding: 8px 16px 4px;
            font-size: 11px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .crm-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #1f2937;
            text-decoration: none;
            font-size: 14px;
            transition: background-color 0.15s ease;
            cursor: pointer;
        }
        
        .crm-nav-item:hover {
            background-color: #f3f4f6;
        }
        
        .crm-nav-item.active {
            background-color: #e0f2fe;
            color: #0369a1;
        }
        
        .crm-nav-item-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .crm-nav-item-icon.dashboard { background: #dbeafe; color: #2563eb; }
        .crm-nav-item-icon.leads { background: #fef3c7; color: #d97706; }
        .crm-nav-item-icon.prospects { background: #d1fae5; color: #059669; }
        .crm-nav-item-icon.opportunities { background: #ede9fe; color: #7c3aed; }
        .crm-nav-item-icon.accounts { background: #fee2e2; color: #dc2626; }
        .crm-nav-item-icon.campaigns { background: #fce7f3; color: #db2777; }
        
        .crm-nav-item-content {
            flex: 1;
        }
        
        .crm-nav-item-title {
            font-weight: 500;
        }
        
        .crm-nav-item-desc {
            font-size: 12px;
            color: #6b7280;
            margin-top: 2px;
        }
        
        .crm-nav-item-badge {
            padding: 2px 8px;
            background: #dbeafe;
            color: #1d4ed8;
            font-size: 11px;
            font-weight: 600;
            border-radius: 12px;
        }

        /* Hide old Fiori header elements when Creatio layout is active */
        body.creatio-active .sapUshellShellHeadItm,
        body.creatio-active .sapUshellShellHeadAction,
        body.creatio-active [id*="shellHeadEndItemsOverflow"],
        body.creatio-active .sapUshellHeadEndContainer,
        body.creatio-active .sapUxAPObjectPageHeaderAction,
        body.creatio-active .sapUxAPHierarchicalSelectFirstLevel,
        body.creatio-active .sapUxAPObjectPageHeaderNavigation {
            visibility: hidden !important;
        }
        
        /* Creatio Layout - Enhanced */
        .creatio-stage-bar{position:fixed;top:44px;left:0;right:380px;height:52px;background:linear-gradient(180deg,#1565C0,#0D47A1);z-index:9500;padding:6px 16px;display:none;box-shadow:0 2px 4px rgba(0,0,0,0.15)}
        .stage-container{display:flex;height:100%;align-items:center;gap:0}
        .stage{flex:1;height:40px;background:rgba(255,255,255,0.08);clip-path:polygon(0 0,calc(100% - 16px) 0,100% 50%,calc(100% - 16px) 100%,0 100%,16px 50%);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease}
        .stage:first-child{clip-path:polygon(0 0,calc(100% - 16px) 0,100% 50%,calc(100% - 16px) 100%,0 100%);border-radius:4px 0 0 4px}
        .stage:last-child{clip-path:polygon(0 0,100% 0,100% 100%,0 100%,16px 50%);border-radius:0 4px 4px 0}
        .stage:hover{background:rgba(255,255,255,0.15)}
        .stage.active{background:linear-gradient(180deg,#2196F3,#1976D2);box-shadow:0 2px 6px rgba(33,150,243,0.4)}
        .stage.completed{background:linear-gradient(180deg,#4CAF50,#388E3C)}
        .stage-content{display:flex;align-items:center;color:rgba(255,255,255,0.7);padding-left:10px}
        .stage.active .stage-content,.stage.completed .stage-content{color:white}
        .stage-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}
        
        /* Enhanced AI Panel */
        .creatio-ai-panel{position:fixed;top:44px;right:0;width:380px;height:calc(100vh - 44px);background:#ffffff;z-index:9600;display:none;flex-direction:column;box-shadow:-4px 0 20px rgba(0,0,0,0.1)}
        .ai-panel-header{background:linear-gradient(135deg,#0F75BC,#1565C0);color:white;padding:12px 16px;display:flex;align-items:center;gap:8px}
        .ai-panel-header span{font-size:20px}
        .ai-panel-header h3{margin:0;font-size:16px;font-weight:600}
        .ai-panel-content{flex:1;overflow-y:auto;padding:0}
        
        /* AI Section Styling */
        .ai-section{padding:16px;border-bottom:1px solid #e0e0e0}
        .ai-section:last-child{border-bottom:none}
        .ai-section-header{display:flex;align-items:center;gap:8px;margin-bottom:12px}
        .ai-section-header span{font-size:16px}
        .ai-section-header h4{margin:0;font-size:14px;font-weight:600;color:#212121}
        
        /* Score Card */
        .score-card{background:#f5f5f5;border-radius:8px;padding:12px;margin-bottom:8px;display:flex;align-items:center;gap:12px}
        .score-ring{width:50px;height:50px;position:relative}
        .score-ring svg{transform:rotate(-90deg)}
        .score-ring-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:12px;font-weight:700}
        .score-details{flex:1}
        .score-label{font-size:12px;font-weight:600;color:#212121;margin-bottom:2px}
        .score-desc{font-size:11px;color:#757575;line-height:1.4}
        
        /* Action Items */
        .action-item{background:#f5f5f5;border-radius:8px;padding:12px;margin-bottom:8px;display:flex;align-items:center;justify-content:space-between}
        .action-info{display:flex;align-items:center;gap:10px}
        .action-icon{width:32px;height:32px;border-radius:50%;background:#e3f2fd;display:flex;align-items:center;justify-content:center;font-size:14px}
        .action-text{font-size:13px;font-weight:500;color:#212121}
        .action-due{font-size:11px;color:#757575}
        .action-priority{font-size:10px;font-weight:600;padding:2px 8px;border-radius:10px}
        .action-priority.high{background:#ffebee;color:#d32f2f}
        .action-priority.medium{background:#fff3e0;color:#f57c00}
        .action-btn{width:28px;height:28px;border-radius:50%;border:none;background:#0F75BC;color:white;cursor:pointer;font-size:12px}
        
        /* Product Card */
        .product-card{background:#f5f5f5;border-radius:8px;padding:10px;margin-bottom:8px;display:flex;align-items:center;gap:10px}
        .product-avatar{width:36px;height:36px;border-radius:8px;background:#7c4dff;color:white;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600}
        .product-details{flex:1}
        .product-name{font-size:12px;font-weight:500;color:#212121}
        .product-meta{font-size:10px;color:#757575}
        .product-trend{font-size:11px;font-weight:600;color:#388E3C}
        
        /* Engagement Stats */
        .engagement-stats{display:flex;justify-content:space-around;background:#f5f5f5;border-radius:8px;padding:12px;margin-bottom:12px}
        .stat-item{text-align:center}
        .stat-number{font-size:20px;font-weight:700;color:#212121}
        .stat-number.success{color:#388E3C}
        .stat-label{font-size:10px;color:#757575;text-transform:uppercase}
        
        /* Timeline */
        .timeline-item{display:flex;gap:12px;padding:8px 0}
        .timeline-dot{width:28px;height:28px;border-radius:50%;background:#e3f2fd;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0}
        .timeline-content{flex:1}
        .timeline-text{font-size:12px;color:#212121}
        .timeline-date{font-size:10px;color:#757575}
        
        /* Quick Contact Section */
        .quick-contact-section{background:linear-gradient(135deg,#e3f2fd,#bbdefb) !important}
        .quick-contact-buttons{display:flex;justify-content:space-around;gap:8px;padding:8px 0}
        .contact-btn{flex:1;min-width:60px;border-radius:8px;padding:10px 4px;border:1px solid transparent;background:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:4px;transition:all 0.2s ease}
        .contact-btn .btn-icon{font-size:18px}
        .contact-btn .btn-text{font-size:10px;font-weight:500}
        .contact-call{border-color:#4CAF50;color:#4CAF50}.contact-call:hover{background:#4CAF50;color:white}
        .contact-email{border-color:#2196F3;color:#2196F3}.contact-email:hover{background:#2196F3;color:white}
        .contact-whatsapp{border-color:#25D366;color:#25D366}.contact-whatsapp:hover{background:#25D366;color:white}
        .contact-schedule{border-color:#FF9800;color:#FF9800}.contact-schedule:hover{background:#FF9800;color:white}
        
        /* Convert Button */
        .convert-btn-container{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);z-index:9999}
        .convert-btn{background:linear-gradient(135deg,#0F75BC,#1565C0);color:white;border:none;border-radius:28px;padding:12px 32px;font-size:15px;font-weight:600;cursor:pointer;box-shadow:0 4px 16px rgba(15,117,188,0.3);transition:all 0.2s ease;display:flex;align-items:center;gap:8px}
        .convert-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(15,117,188,0.4)}
        
        /* Overall Rating */
        .rating-box{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:8px;padding:16px;text-align:center;margin-top:12px}
        .rating-label{font-size:10px;color:#757575;text-transform:uppercase;letter-spacing:0.5px}
        .rating-badge{display:inline-flex;align-items:center;gap:6px;background:#2e7d32;color:white;padding:6px 16px;border-radius:16px;font-size:13px;font-weight:700;margin-top:8px}
        
        body.creatio-active #content{margin-right:380px}

    </style>

    <script type="text/javascript">
        window["sap-ushell-config"] = {
            defaultRenderer: "fiori2",
            bootstrapPlugins: {
                "RuntimeAuthoringPlugin": {
                    component: "sap.ushell.plugins.rta",
                    config: {
                        validateAppVersion: false
                    }
                }
            },
            renderers: {
                fiori2: {
                    componentData: {
                        config: {
                            search: "hidden",
                            enableSearch: false,
                            enablePersonalization: true,
                            enableRecentActivity: true,
                            appState: "lean"
                        }
                    }
                }
            },
            applications: {
                "dashboard-display": {
                    title: "CRM Dashboard",
                    description: "Unified analytics dashboard for sales reps",
                    applicationType: "URL",
                    url: "/beautyleads.dashboard/index.html"
                },
                "leads-manage": {
                    title: "Leads",
                    description: "Capture and qualify potential customers",
                    applicationType: "URL",
                    url: "/beautyleads.leads/index.html"
                },
                "prospects-manage": {
                    title: "Prospects",
                    description: "Manage qualified prospects in the sales pipeline",
                    applicationType: "URL",
                    url: "/beautyleads.prospects/index.html"
                },
                "opportunities-manage": {
                    title: "Opportunities",
                    description: "Track sales pipeline and deals",
                    applicationType: "URL",
                    url: "/beautyleads.opportunities/index.html"
                },
                "accounts-manage": {
                    title: "Accounts",
                    description: "Manage customer companies and retailers",
                    applicationType: "URL",
                    url: "/beautyleads.accounts/index.html"
                },
                "campaigns-manage": {
                    title: "Marketing Campaigns",
                    description: "Trend-driven marketing campaign automation",
                    applicationType: "URL",
                    url: "/beautyleads.campaigns/index.html"
                }
            },
            groups: [
                {
                    id: "dashboard-group",
                    title: "Dashboard",
                    isPreset: true,
                    isVisible: true,
                    isDefaultGroup: true,
                    tiles: [
                        {
                            id: "dashboard-tile",
                            tileType: "sap.ushell.ui.tile.StaticTile",
                            properties: {
                                title: "CRM Dashboard",
                                subtitle: "Analytics Overview",
                                infoState: "Neutral",
                                info: "AI-Powered",
                                icon: "sap-icon://business-objects-experience",
                                targetURL: "#dashboard-display"
                            }
                        }
                    ]
                },
                {
                    id: "sales-pipeline",
                    title: "Sales Pipeline",
                    isPreset: true,
                    isVisible: true,
                    tiles: [
                        {
                            id: "leads-tile",
                            tileType: "sap.ushell.ui.tile.StaticTile",
                            properties: {
                                title: "Leads",
                                subtitle: "Capture & Qualify",
                                infoState: "Neutral",
                                info: "Step 1",
                                icon: "sap-icon://lead",
                                targetURL: "#leads-manage"
                            }
                        },
                        {
                            id: "prospects-tile",
                            tileType: "sap.ushell.ui.tile.StaticTile",
                            properties: {
                                title: "Prospects",
                                subtitle: "Qualified Pipeline",
                                infoState: "Neutral",
                                info: "Step 2",
                                icon: "sap-icon://person-placeholder",
                                targetURL: "#prospects-manage"
                            }
                        },
                        {
                            id: "opportunities-tile",
                            tileType: "sap.ushell.ui.tile.StaticTile",
                            properties: {
                                title: "Opportunities",
                                subtitle: "Deals & Proposals",
                                infoState: "Neutral",
                                info: "Step 3",
                                icon: "sap-icon://opportunity",
                                targetURL: "#opportunities-manage"
                            }
                        },
                        {
                            id: "accounts-tile",
                            tileType: "sap.ushell.ui.tile.StaticTile",
                            properties: {
                                title: "Accounts",
                                subtitle: "Customer Management",
                                infoState: "Neutral",
                                info: "Step 4",
                                icon: "sap-icon://customer-financial-fact-sheet",
                                targetURL: "#accounts-manage"
                            }
                        }
                    ]
                },
                {
                    id: "marketing",
                    title: "Marketing",
                    isPreset: true,
                    isVisible: true,
                    tiles: [
                        {
                            id: "campaigns-tile",
                            tileType: "sap.ushell.ui.tile.StaticTile",
                            properties: {
                                title: "Marketing Campaigns",
                                subtitle: "Trend-Driven Automation",
                                infoState: "Neutral",
                                info: "",
                                icon: "sap-icon://marketing-campaign",
                                targetURL: "#campaigns-manage"
                            }
                        }
                    ]
                }
            ]
        };
    </script>

    <script src="https://sapui5.hana.ondemand.com/1.120.0/test-resources/sap/ushell/bootstrap/sandbox.js" id="sap-ushell-bootstrap"></script>
    <script id="sap-ui-bootstrap"
        src="https://sapui5.hana.ondemand.com/1.120.0/resources/sap-ui-core.js"
        data-sap-ui-libs=""
        data-sap-ui-async="true"
        data-sap-ui-preload="async"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-compatVersion="edge"
        data-sap-ui-language="en"
        data-sap-ui-resourceroots='{
            "beautydashboard.eybeauty1": "/ey-beauty-1/webapp/",
            "beautyleads.dashboard": "/dashboard/webapp/",
            "beautyleads.prospects": "/prospects/webapp/",
            "beautyleads.campaigns": "/campaigns/webapp/",
            "beautyleads.leads": "/leads/webapp/",
            "beautyleads.accounts": "/accounts/webapp/",
            "beautyleads.opportunities": "/opportunities/webapp/"
        }'
        data-sap-ui-frameOptions="allow"
        data-sap-ui-flexibilityServices='[{"connector": "LocalStorageConnector"}]'>
    </script>
    <script>
        // Navigation apps configuration
        var crmNavApps = {
            dashboard: [
                { id: 'dashboard-display', title: 'CRM Dashboard', desc: 'Analytics Overview', icon: 'üìä', hash: '#dashboard-display' }
            ],
            pipeline: [
                { id: 'leads-manage', title: 'Leads', desc: 'Capture & Qualify', icon: 'üéØ', hash: '#leads-manage', badge: 'Step 1' },
                { id: 'prospects-manage', title: 'Prospects', desc: 'Qualified Pipeline', icon: 'üë§', hash: '#prospects-manage', badge: 'Step 2' },
                { id: 'opportunities-manage', title: 'Opportunities', desc: 'Deals & Proposals', icon: 'üíº', hash: '#opportunities-manage', badge: 'Step 3' },
                { id: 'accounts-manage', title: 'Accounts', desc: 'Customer Management', icon: 'üè¢', hash: '#accounts-manage', badge: 'Step 4' }
            ],
            marketing: [
                { id: 'campaigns-manage', title: 'Marketing Campaigns', desc: 'Trend-Driven Automation', icon: 'üì£', hash: '#campaigns-manage' }
            ]
        };
        
        // Get current app title from hash
        function getCurrentAppTitle() {
            var hash = window.location.hash;
            var allApps = [...crmNavApps.dashboard, ...crmNavApps.pipeline, ...crmNavApps.marketing];
            var currentApp = allApps.find(function(app) { return hash.includes(app.id); });
            return currentApp ? currentApp.title : 'Smart Beauty CRM Dashboard';
        }
        
        // Create navigation dropdown HTML
        function createNavDropdown() {
            var currentTitle = getCurrentAppTitle();
            var currentHash = window.location.hash;
            
            var html = '<div class="crm-nav-dropdown" id="crmNavDropdown">' +
                '<div class="crm-nav-trigger" id="crmNavTrigger">' +
                '<span id="crmNavCurrentTitle">' + currentTitle + '</span>' +
                '<span class="arrow">‚ñº</span>' +
                '</div>' +
                '<div class="crm-nav-menu">';
            
            // Dashboard section
            html += '<div class="crm-nav-section">' +
                '<div class="crm-nav-section-title">Dashboard</div>';
            crmNavApps.dashboard.forEach(function(app) {
                var isActive = currentHash.includes(app.id) ? ' active' : '';
                html += '<a href="' + app.hash + '" class="crm-nav-item' + isActive + '">' +
                    '<div class="crm-nav-item-icon dashboard">' + app.icon + '</div>' +
                    '<div class="crm-nav-item-content">' +
                    '<div class="crm-nav-item-title">' + app.title + '</div>' +
                    '<div class="crm-nav-item-desc">' + app.desc + '</div>' +
                    '</div></a>';
            });
            html += '</div>';
            
            // Sales Pipeline section
            html += '<div class="crm-nav-section">' +
                '<div class="crm-nav-section-title">Sales Pipeline</div>';
            crmNavApps.pipeline.forEach(function(app) {
                var isActive = currentHash.includes(app.id) ? ' active' : '';
                var iconClass = app.id.replace('-manage', '');
                html += '<a href="' + app.hash + '" class="crm-nav-item' + isActive + '">' +
                    '<div class="crm-nav-item-icon ' + iconClass + '">' + app.icon + '</div>' +
                    '<div class="crm-nav-item-content">' +
                    '<div class="crm-nav-item-title">' + app.title + '</div>' +
                    '<div class="crm-nav-item-desc">' + app.desc + '</div>' +
                    '</div>' +
                    (app.badge ? '<div class="crm-nav-item-badge">' + app.badge + '</div>' : '') +
                    '</a>';
            });
            html += '</div>';
            
            // Marketing section
            html += '<div class="crm-nav-section">' +
                '<div class="crm-nav-section-title">Marketing</div>';
            crmNavApps.marketing.forEach(function(app) {
                var isActive = currentHash.includes(app.id) ? ' active' : '';
                html += '<a href="' + app.hash + '" class="crm-nav-item' + isActive + '">' +
                    '<div class="crm-nav-item-icon campaigns">' + app.icon + '</div>' +
                    '<div class="crm-nav-item-content">' +
                    '<div class="crm-nav-item-title">' + app.title + '</div>' +
                    '<div class="crm-nav-item-desc">' + app.desc + '</div>' +
                    '</div></a>';
            });
            html += '</div>';
            
            html += '</div></div>';
            return html;
        }
        
        // Create and inject fixed navigation dropdown
        function injectNavDropdown() {
            // Check if already injected
            if (document.getElementById('crmNavDropdown')) {
                // Update title if already exists
                var titleSpan = document.getElementById('crmNavCurrentTitle');
                if (titleSpan) {
                    titleSpan.textContent = getCurrentAppTitle();
                }
                // Update active states
                updateActiveStates();
                return;
            }
            
            // Create dropdown container
            var dropdownContainer = document.createElement('div');
            dropdownContainer.innerHTML = createNavDropdown();
            var dropdown = dropdownContainer.firstChild;
            
            // Append to body (fixed position)
            document.body.appendChild(dropdown);
            
            // Setup event listeners
            var trigger = document.getElementById('crmNavTrigger');
            var navDropdown = document.getElementById('crmNavDropdown');
            
            if (trigger && navDropdown) {
                trigger.addEventListener('click', function(e) {
                    e.stopPropagation();
                    navDropdown.classList.toggle('open');
                });
                
                document.addEventListener('click', function(e) {
                    if (!navDropdown.contains(e.target)) {
                        navDropdown.classList.remove('open');
                    }
                });
                
                // Close dropdown when clicking on nav items
                document.querySelectorAll('.crm-nav-item').forEach(function(item) {
                    item.addEventListener('click', function() {
                        navDropdown.classList.remove('open');
                    });
                });
            }
            
            console.log('[CRM Nav] Navigation dropdown injected successfully');
        }
        
        // Update active states based on current hash
        function updateActiveStates() {
            document.querySelectorAll('.crm-nav-item').forEach(function(item) {
                item.classList.remove('active');
                var href = item.getAttribute('href');
                if (href && window.location.hash.includes(href.replace('#', ''))) {
                    item.classList.add('active');
                }
            });
        }
        
        // Setup navigation watcher for hash changes
        function setupNavigationWatcher() {
            window.addEventListener('hashchange', function() {
                // Update title and active states
                setTimeout(function() {
                    var titleSpan = document.getElementById('crmNavCurrentTitle');
                    if (titleSpan) {
                        titleSpan.textContent = getCurrentAppTitle();
                    }
                    updateActiveStates();
                }, 100);
            });
        }
        
        sap.ui.getCore().attachInit(function () {
            sap.ushell.Container.createRenderer(null, true).then(function(renderer) {
                renderer.placeAt("content");
                
                // Setup navigation watcher
                setupNavigationWatcher();
                
                // Inject navigation after shell is rendered (multiple attempts)
                setTimeout(injectNavDropdown, 500);
                setTimeout(injectNavDropdown, 1000);
                setTimeout(injectNavDropdown, 2000);
            });
        });
    </script>
</head>

<body class="sapUiBody" id="content">

    <div id="creatioStageBar" class="creatio-stage-bar">
        <div class="stage-container">
            <div class="stage completed"><div class="stage-content"><span class="stage-label">NEW</span></div></div>
            <div class="stage completed"><div class="stage-content"><span class="stage-label">CONTACTED</span></div></div>
            <div class="stage active"><div class="stage-content"><span class="stage-label">QUALIFIED</span></div></div>
            <div class="stage"><div class="stage-content"><span class="stage-label">NURTURING</span></div></div>
            <div class="stage"><div class="stage-content"><span class="stage-label">CONVERTED</span></div></div>
            <div class="stage"><div class="stage-content"><span class="stage-label">LOST</span></div></div>
        </div>
    </div>
    
    <div id="creatioAIPanel" class="creatio-ai-panel">
        <div class="ai-panel-header"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"/></svg><h3>AI Assistant</h3></div>
        <div class="ai-panel-content">
            <!-- Quick Contact Actions Section -->
            <div class="ai-section quick-contact-section">
                <div class="ai-section-header"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><h4>Quick Actions</h4></div>
                <div class="quick-contact-buttons">
                    <button class="contact-btn contact-call" onclick="alert('Calling +60123456789...')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
                        <span class="btn-text">Call</span>
                    </button>
                    <button class="contact-btn contact-email" onclick="alert('Opening email composer...')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                        <span class="btn-text">Email</span>
                    </button>
                    <button class="contact-btn contact-whatsapp" onclick="window.open('https://wa.me/60123456789', '_blank')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
                        <span class="btn-text">WhatsApp</span>
                    </button>
                    <button class="contact-btn contact-schedule" onclick="alert('Opening scheduler...')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg>
                        <span class="btn-text">Schedule</span>
                    </button>
                </div>
            </div>
            
            <!-- Lead Scoring Section -->
            <div class="ai-section">
                <div class="ai-section-header"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/></svg><h4>Lead Scoring</h4></div>
                <div class="score-card">
                    <div class="score-ring">
                        <svg width="50" height="50" viewBox="0 0 50 50">
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="4"/>
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#2e7d32" stroke-width="4" stroke-dasharray="125.6" stroke-dashoffset="10" stroke-linecap="round"/>
                        </svg>
                        <span class="score-ring-text">92%</span>
                    </div>
                    <div class="score-details">
                        <div class="score-label">AI Score</div>
                        <div class="score-desc">High engagement potential based on social activity and brand fit</div>
                    </div>
                </div>
                <div class="score-card">
                    <div class="score-ring">
                        <svg width="50" height="50" viewBox="0 0 50 50">
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="4"/>
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#2e7d32" stroke-width="4" stroke-dasharray="125.6" stroke-dashoffset="6" stroke-linecap="round"/>
                        </svg>
                        <span class="score-ring-text">95</span>
                    </div>
                    <div class="score-details">
                        <div class="score-label">Trend Score</div>
                        <div class="score-desc">K-Beauty products are trending strongly on TikTok</div>
                    </div>
                </div>
                <div class="rating-box">
                    <div class="rating-label">Overall Engagement Rating</div>
                    <div class="rating-badge">HOT LEAD</div>
                </div>
            </div>
            
            <!-- Next Best Actions Section -->
            <div class="ai-section">
                <div class="ai-section-header"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg><h4>Next Best Actions</h4></div>
                <div class="action-item">
                    <div class="action-info">
                        <svg class="action-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
                        <div>
                            <div class="action-text">Schedule Call</div>
                            <div class="action-due">Today</div>
                        </div>
                    </div>
                    <span class="action-priority high">High</span>
                    <button class="action-btn">‚Üí</button>
                </div>
                <div class="action-item">
                    <div class="action-info">
                        <svg class="action-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                        <div>
                            <div class="action-text">Send Catalog</div>
                            <div class="action-due">This week</div>
                        </div>
                    </div>
                    <span class="action-priority medium">Medium</span>
                    <button class="action-btn">‚Üí</button>
                </div>
                <div class="action-item">
                    <div class="action-info">
                        <svg class="action-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
                        <div>
                            <div class="action-text">WhatsApp Follow-up</div>
                            <div class="action-due">Anytime</div>
                        </div>
                    </div>
                    <span class="action-priority medium">Medium</span>
                    <button class="action-btn">‚Üí</button>
                </div>
            </div>
            
            <!-- Recommended Products Section -->
            <div class="ai-section">
                <div class="ai-section-header"><span>üõçÔ∏è</span><h4>Recommended Products</h4></div>
                <div class="product-card">
                    <div class="product-avatar">KG</div>
                    <div class="product-details">
                        <div class="product-name">K-Beauty Glass Skin Serum</div>
                        <div class="product-meta">COSRX ‚Ä¢ RM 89.00</div>
                    </div>
                    <div class="product-trend">‚Üë 94%</div>
                </div>
                <div class="product-card">
                    <div class="product-avatar">SM</div>
                    <div class="product-details">
                        <div class="product-name">Snail Mucin Essence</div>
                        <div class="product-meta">COSRX ‚Ä¢ RM 75.00</div>
                    </div>
                    <div class="product-trend">‚Üë 91%</div>
                </div>
                <div class="product-card">
                    <div class="product-avatar">RW</div>
                    <div class="product-details">
                        <div class="product-name">Rice Water Toner</div>
                        <div class="product-meta">I'm From ‚Ä¢ RM 95.00</div>
                    </div>
                    <div class="product-trend">‚Üë 88%</div>
                </div>
            </div>
            
            <!-- Engagement History Section -->
            <div class="ai-section">
                <div class="ai-section-header"><span>üìà</span><h4>Engagement History</h4></div>
                <div class="engagement-stats">
                    <div class="stat-item">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Contacts</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number success">85%</div>
                        <div class="stat-label">Response Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">2h</div>
                        <div class="stat-label">Avg Response</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg></div>
                    <div class="timeline-content">
                        <div class="timeline-text">TikTok DM - Product inquiry</div>
                        <div class="timeline-date">2 days ago</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg></div>
                    <div class="timeline-content">
                        <div class="timeline-text">Follow-up call scheduled</div>
                        <div class="timeline-date">5 days ago</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot">üìß</div>
                    <div class="timeline-content">
                        <div class="timeline-text">Product catalog sent</div>
                        <div class="timeline-date">1 week ago</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Convert to Prospect Button -->
    <div id="creatioConvertBtn" class="convert-btn-container" style="display:none">
        <button class="convert-btn" onclick="alert('Converting lead to prospect...')">
            <span>üîÑ</span>
            <span>Convert to Prospect</span>
        </button>
    </div>
    
    <script>
    (function(){
        function updateCreatioUI(){
            var h=location.hash;
            var s=document.getElementById("creatioStageBar");
            var a=document.getElementById("creatioAIPanel");
            var c=document.getElementById("creatioConvertBtn");
            if(h.indexOf("leads-manage")>=0 && h.indexOf("Leads(")>=0){
                if(s) s.style.display="block";
                if(a) a.style.display="flex";
                if(c) c.style.display="block";
                document.body.classList.add("creatio-active");
            } else {
                if(s) s.style.display="none";
                if(a) a.style.display="none";
                if(c) c.style.display="none";
                document.body.classList.remove("creatio-active");
            }
        }
        addEventListener("hashchange", updateCreatioUI);
        setInterval(updateCreatioUI, 1000);
        setTimeout(updateCreatioUI, 500);
    })();
    </script>
</body>

</html>
